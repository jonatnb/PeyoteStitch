<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Peyote Pattern Maker v3.6.3</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Peyote Pattern Maker <span class="badge">v3.6.3 (iOS-safe)</span></h1>
</header>

<section id="statusPanel">
  <div style="font-weight:600">Status</div>
  <div id="statusLog" class="small" style="white-space:pre-line;color:#374151">Ready.</div>
</section>

<main>
  <section id="controls">
    <input id="file" type="file" accept="image/jpeg,image/png,image/webp,image/*;capture=environment">
    <button id="btnLoadTest">Load Test Image</button>
    <button id="btnResetCrop">Reset Crop</button>
    <label class="small"><input type="checkbox" id="lockCropAspect" checked> Lock crop to bead aspect</label>
    <span id="cropAspectLabel" class="small"></span>
    <label class="small">Bead W: <input id="beadW" type="number" value="90" min="10" max="400"></label>
    <label class="small">Bead H: <input id="beadH" type="number" value="50" min="10" max="400"></label>
  </section>

  <section id="previewPane">
    <div class="row">
      <div class="col">
        <div class="small">Original</div>
        <img id="origPreview" alt="original">
        <div id="fileInfo" class="small">â€“</div>
      </div>
      <div class="col">
        <div class="small">Crop</div>
        <canvas id="cropThumb" width="240" height="160"></canvas>
      </div>
    </div>
  </section>

  <section id="assist">
    <h3 style="margin:12px">Assist Previews</h3>
    <div class="row">
      <div class="col" style="max-width:180px">
        <div class="small">Zoom (loupe)</div>
        <canvas id="loupe" width="140" height="140"></canvas>
      </div>
      <div class="col">
        <div class="small">Bead view</div>
        <canvas id="beadSim" width="260" height="180"></canvas>
      </div>
    </div>
  </section>

  <section id="cropper" style="padding:12px">
    <canvas id="cropCanvas" width="600" height="360"></canvas>
  </section>
</main>

<section id="debugPanel" style="padding:12px 16px;background:#fff;border-top:1px solid #e5e7eb">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
    <h3 style="margin:0">Debug Data</h3>
    <button id="btnCopyDebug">Copy</button>
  </div>
  <pre id="debugOut"></pre>
</section>

<script src="main.js"></script>
</body>
</html>